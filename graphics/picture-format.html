<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Picture Format - The Unofficial DOOM Specs</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../disclaimer.html">Disclaimer</a></li><li class="chapter-item expanded affix "><a href="../copyright-notice.html">Copyright Notice</a></li><li class="chapter-item expanded "><a href="../introduction/index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../introduction/id-software's-copyright-and-the-shareware-version.html"><strong aria-hidden="true">1.1.</strong> id Software's Copyright and the Shareware Version</a></li><li class="chapter-item expanded "><a href="../introduction/what's-new.html"><strong aria-hidden="true">1.2.</strong> What's New</a></li></ol></li><li class="chapter-item expanded "><a href="../basics/index.html"><strong aria-hidden="true">2.</strong> Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../basics/pwads.html"><strong aria-hidden="true">2.1.</strong> Pwads</a></li><li class="chapter-item expanded "><a href="../basics/doom-versions.html"><strong aria-hidden="true">2.2.</strong> DOOM versions</a></li><li class="chapter-item expanded "><a href="../basics/terminology-conventions.html"><strong aria-hidden="true">2.3.</strong> Terminology conventions</a></li></ol></li><li class="chapter-item expanded "><a href="../list-of-doom.wad-directory-entries.html"><strong aria-hidden="true">3.</strong> List of DOOM.WAD Directory Entries</a></li><li class="chapter-item expanded "><a href="../the-levels/index.html"><strong aria-hidden="true">4.</strong> The Levels</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../the-levels/ex-my-or-ma-pxy.html"><strong aria-hidden="true">4.1.</strong> ExMy or MAPxy</a></li><li class="chapter-item expanded "><a href="../the-levels/things.html"><strong aria-hidden="true">4.2.</strong> THINGS</a></li><li class="chapter-item expanded "><a href="../the-levels/linedefs.html"><strong aria-hidden="true">4.3.</strong> LINEDEFS</a></li><li class="chapter-item expanded "><a href="../the-levels/sidedefs.html"><strong aria-hidden="true">4.4.</strong> SIDEDEFS</a></li><li class="chapter-item expanded "><a href="../the-levels/vertexes.html"><strong aria-hidden="true">4.5.</strong> VERTEXES</a></li><li class="chapter-item expanded "><a href="../the-levels/segs.html"><strong aria-hidden="true">4.6.</strong> SEGS</a></li><li class="chapter-item expanded "><a href="../the-levels/ssectors.html"><strong aria-hidden="true">4.7.</strong> SSECTORS</a></li><li class="chapter-item expanded "><a href="../the-levels/nodes.html"><strong aria-hidden="true">4.8.</strong> NODES</a></li><li class="chapter-item expanded "><a href="../the-levels/sectors.html"><strong aria-hidden="true">4.9.</strong> SECTORS</a></li><li class="chapter-item expanded "><a href="../the-levels/reject.html"><strong aria-hidden="true">4.10.</strong> REJECT</a></li><li class="chapter-item expanded "><a href="../the-levels/blockmap.html"><strong aria-hidden="true">4.11.</strong> BLOCKMAP</a></li></ol></li><li class="chapter-item expanded "><a href="../graphics/index.html"><strong aria-hidden="true">5.</strong> Graphics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../graphics/picture-format.html" class="active"><strong aria-hidden="true">5.1.</strong> Picture Format</a></li></ol></li><li class="chapter-item expanded "><a href="../sounds-and-music/index.html"><strong aria-hidden="true">6.</strong> Sounds and Music</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../sounds-and-music/pc-speaker-sound-effects.html"><strong aria-hidden="true">6.1.</strong> PC Speaker Sound Effects</a></li><li class="chapter-item expanded "><a href="../sounds-and-music/soundcard-sound-effects.html"><strong aria-hidden="true">6.2.</strong> Soundcard Sound Effects</a></li><li class="chapter-item expanded "><a href="../sounds-and-music/music.html"><strong aria-hidden="true">6.3.</strong> Music</a></li><li class="chapter-item expanded "><a href="../sounds-and-music/genmidi.html"><strong aria-hidden="true">6.4.</strong> GENMIDI</a></li><li class="chapter-item expanded "><a href="../sounds-and-music/dmxgus.html"><strong aria-hidden="true">6.5.</strong> DMXGUS</a></li></ol></li><li class="chapter-item expanded "><a href="../miscellaneous-lumps/index.html"><strong aria-hidden="true">7.</strong> Miscellaneous Lumps</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../miscellaneous-lumps/playpal.html"><strong aria-hidden="true">7.1.</strong> PLAYPAL</a></li><li class="chapter-item expanded "><a href="../miscellaneous-lumps/colormap.html"><strong aria-hidden="true">7.2.</strong> COLORMAP</a></li><li class="chapter-item expanded "><a href="../miscellaneous-lumps/endoom.html"><strong aria-hidden="true">7.3.</strong> ENDOOM</a></li><li class="chapter-item expanded "><a href="../miscellaneous-lumps/texture-1-and-texture-2.html"><strong aria-hidden="true">7.4.</strong> TEXTURE1 and TEXTURE2</a></li><li class="chapter-item expanded "><a href="../miscellaneous-lumps/pnames.html"><strong aria-hidden="true">7.5.</strong> PNAMES</a></li><li class="chapter-item expanded "><a href="../miscellaneous-lumps/dem-os.html"><strong aria-hidden="true">7.6.</strong> DEMOs</a></li><li class="chapter-item expanded "><a href="../miscellaneous-lumps/level-changes-from-1.2-to-1.666-doom.wad.html"><strong aria-hidden="true">7.7.</strong> Level changes from 1.2 to 1.666 DOOM.WAD</a></li></ol></li><li class="chapter-item expanded "><a href="../savegame-files.html"><strong aria-hidden="true">8.</strong> Savegame Files</a></li><li class="chapter-item expanded "><a href="../the-doom.exe-file/index.html"><strong aria-hidden="true">9.</strong> The DOOM.EXE File</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../the-doom.exe-file/version-1.2-doom.exe-data-segment-overview.html"><strong aria-hidden="true">9.1.</strong> Version 1.2 DOOM.EXE Data Segment Overview</a></li><li class="chapter-item expanded "><a href="../the-doom.exe-file/version-1.666-doom.exe-data-segment-overview.html"><strong aria-hidden="true">9.2.</strong> Version 1.666 DOOM.EXE Data Segment Overview</a></li><li class="chapter-item expanded "><a href="../the-doom.exe-file/detail-on-some-exe-data-structures.html"><strong aria-hidden="true">9.3.</strong> Detail on some EXE Data Structures</a></li></ol></li><li class="chapter-item expanded "><a href="../appendices/index.html"><strong aria-hidden="true">10.</strong> Appendices</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../appendices/backus-naur-form-definitions-of-wad-elements.html"><strong aria-hidden="true">10.1.</strong> Backus-Naur Form definitions of WAD elements</a></li><li class="chapter-item expanded "><a href="../appendices/doom-engine-limits.html"><strong aria-hidden="true">10.2.</strong> DOOM engine limits</a></li><li class="chapter-item expanded "><a href="../appendices/doom.wad-changes-and-errors.html"><strong aria-hidden="true">10.3.</strong> DOOM.WAD changes and errors</a></li><li class="chapter-item expanded "><a href="../appendices/a-blockmap-algorithm.html"><strong aria-hidden="true">10.4.</strong> A BLOCKMAP algorithm</a></li><li class="chapter-item expanded "><a href="../appendices/other-helpful-documents.html"><strong aria-hidden="true">10.5.</strong> Other helpful documents</a></li><li class="chapter-item expanded "><a href="../appendices/acknowledgments.html"><strong aria-hidden="true">10.6.</strong> Acknowledgments</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Unofficial DOOM Specs</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="picture-format"><a class="header" href="#picture-format">Picture Format</a></h1>
<pre><code>Each picture has three sections. First, an 8-byte header composed of
four short-integers. Then a number of long-integer pointers. Then the
picture's pixel/color data. See [A-1] for concise BNF style definitions,
here is a meatier explanation of the format:

(A) The header's four fields are:

  (1) Width. The number of columns of picture data.
  (2) Height. The number of rows.
  (3) Left offset. The number of pixels to the left of the center;
        where the first column gets drawn.
  (4) Top offset. The number of pixels above the origin;
        where the top row is.

  The width and height define a rectangular space or limits for drawing
a picture within. To be &quot;centered&quot;, (3) is usually about half of the
total width. If the picture had 30 columns, and (3) was 10, then it
would be off-center to the right, especially when the player is standing
right in front of it, looking at it. If a picture has 30 rows, and (4)
is 60, it will appear to &quot;float&quot; like a blue soul-sphere. If (4) equals
the number of rows, it will appear to rest on the ground. If (4) is less
than that for an object, the bottom part of the picture looks awkward.
  With walls patches, (3) is always (columns/2)-1, and (4) is always
(rows)-5. This is because the walls are drawn consistently within their
own space (There are two integers in each SIDEDEF which can offset the
starting position for drawing a wall's texture within the wall space).

  Finally, if (3) and (4) are NEGATIVE integers, then they are the
absolute coordinates from the top-left corner of the screen, to begin
drawing the picture, assuming the VIEW is full-screen (i.e., the full
320x200). This is only done with the picture of the player's current
weapon - fist, chainsaw, bfg9000, etc. The game engine scales the
picture down appropriatelyif the view is less than full-screen.

(B) After the header, there are N = field (1) = &lt;width&gt; = (# of columns)
4-byte &lt;long&gt; integers. These are pointers to the data for each COLUMN.
The value of the pointer represents the offset in bytes from the first
byte of the picture lump.

(C) Each column is composed of some number of BYTES (NOT integers),
arranged in &quot;posts&quot;:

  The first byte is the row to begin drawing this post at. 0 means
whatever height the header (4) upwards-offset describes, larger numbers
move correspondingly down.
  The second byte is how many colored pixels (non-transparent) to draw,
going downwards.
  Then follow (# of pixels) + 2 bytes, which define what color each
pixel is, using the game palette. The first and last bytes AREN'T drawn,
and I don't know why they are there. Probably just leftovers from the
creation process on the NeXT machines. Only the middle (# of pixels in
this post) are drawn, starting at the row specified in the first byte
of the post.
  After the last byte of a post, either the column ends, or there is
another post, which will start as stated above.
  255 (0xFF) ends the column, so a column that starts this way is a null
column, all &quot;transparent&quot;. Draw the next column.


-----------------------------------------------
CHAPTER [6]: Flats (Floor and Ceiling Textures)
-----------------------------------------------

  All the lumpnames for flats are in the directory between the F_START
and F_END entries. Calling them flats is a good way to avoid confusion
with wall textures. There is no look-up or meta-structure in flats as
there is in walls textures. Each flat is 4096 raw bytes, making a square
64 by 64 pixels. This is pasted onto a floor or ceiling with the same
orientation as the automap would imply, i.e. the first byte is the color
at the NW corner, the 64th byte (byte 63, 0x3f) is the NE corner, etc.
  The blocks in the automap grid are 128 by 128, so four flats will fit
in each block. Note that there is no way to offset the placement of flats,
as can be done with wall textures. They are pasted according to grid lines
64 apart, reckoned from the coordinate (0,0). This allows flats to flow
smoothly even across jagged boundaries between sectors with the same
floor or ceiling height.

  As discussed in chapter [5], replacement and/or new-name flats don't
work right from pwad files unless they are all in the same wad.
  Theoretically, you can change all the flats want by constructing a
new DOOM.WAD or ALLFLATS.WAD pwad, but you have to make sure no floor
or ceiling uses an entry name which isn't in your F_ section. And you
have to include these four entries for DOOM 1 use, although you can
change their actual contents (pictures): FLOOR4_8, SFLR6_1, MFLR8_4,
and FLOOR7_2. The first three are needed as backgrounds for the episode
end texts. The last is what is shown &quot;outside&quot; the border of the display
window if the display is not full-screen.


[6-1]: Animated Flats
---------------------

  See Chapter [8-4-1] for a discussion of how the animated walls and
flats work. Unfortunately, the fact that the flats all need to be
lumped together in one wad file means that its not possible to change
the animations via a pwad file, unless it contains ALL the flats, which
amounts to several hundred k. Plus it is illegal to distribute the
original data, so to pass around modifications, either all the flats
must be all-new, or a utility must be used to construct a FLATS.WAD
on an end-user's hard drive, using the original DOOM.WAD plus the
additions. (Note: Bernd Kreimeier, listed in [A-5], has written a
utility that does just this. It is called DMADDS11).
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../graphics/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../sounds-and-music/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../graphics/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../sounds-and-music/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
